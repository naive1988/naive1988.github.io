<code>
  <pre>
Promise.allSettled = function(ps) {
  return Promise.all(
    ps.map(
      p => Promise.resolve(p)
        .then(
          v => ({ status: 'fulfilled', value: v }),
          e => ({ status: 'rejected', reason: e })
        )
    )
  )
}
  </pre>
</code>
